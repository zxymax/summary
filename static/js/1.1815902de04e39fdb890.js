webpackJsonp([1],{"5CbW":function(t,s,n){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var o={data:function(){return{code1:"function showThis() {\n\t\t\t\t\t\tconsole.log(this)\n\t\t\t\t\t}\n\t\t\t\t\tfunction showStrictThis() {\n\t\t\t\t\t\t'use strict'\n\t\t\t\t\t\tconsole.log(this)\n\t\t\t\t\t}\n\t\t\t\t\tshowThis()  // window\n\t\t\t\t\tshowStrictThis() // undefined",code2:"\n\t\t\t\tlet boss = {\n\t\t\t\t\tname: 'boss',\n\t\t\t\t\treturnThis() {\n\t\t\t\t\t\treturn this\n\t\t\t\t\t}\n\t\t\t \t}\n\t\t\t\t console.log(boss.returnThis() === boss) // true\n\t\t\t",code3:"\n\t\t\t\tlet boss1 = {\n\t\t\t\t  name: 'boss1',\n\t\t\t\t  returnThis () {\n\t\t\t\t    return this\n\t\t\t\t  }\n\t\t\t\t}\n\t\t\t\tlet boss2 = {\n\t\t\t\t\tname: 'boss2',\n\t\t\t\t\treturnThis() {\n\t\t\t\t\t\treturn boss1.returnThis()\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tlet boss3 = {\n\t\t\t\t\tname: 'boss3',\n\t\t\t\t\treturnThis() {\n\t\t\t\t\t\tlet returnThis = boss1.returnThis\n\t\t\t\t\t\treturn returnThis()\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tboss1.returnThis() // boss1\n\t\t\t\tboss2.returnThis() // boss1\n\t\t\t\tboss3.returnThis() // window\n\t\t\t",code4:"\n\t\t\t\tlet boss1 = {\n\t\t\t\t\tname: 'boss1',\n\t\t\t\t\treturnThis() {\n\t\t\t\t\t\tconsole.log(this)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tlet boss2 = {\n\t\t\t\t\tname: 'boss2',\n\t\t\t\t\treturnThis: boss1.returnThis\n\t\t\t\t}\n\t\t\t\tboss2.returnThis() // boss2\n\t\t\t",code5:"\n\t\t\t\tfunction returnThis() {\n\t\t\t\t\treturn this\n\t\t\t\t}\n\t\t\t\tlet boss1 = {\n\t\t\t\t\tname: 'boss1'\n\t\t\t\t}\n\t\t\t\treturnThis() // window\n\t\t\t\treturnThis.call(boss1) // boss1\n\t\t\t\treturnThis.apply(boss1) // boss1\n\t\t\t",code6:"\n\t\t\t\tfunction returnThis() {\n\t\t\t\t\treturn this\n\t\t\t\t}\n\t\t\t\tlet boss1 = {\n\t\t\t\t\tname: 'boss1'\n\t\t\t\t}\n\t\t\t\tlet boss1ReturnThis = returnThis.bind(boss1)\n\t\t\t\tboss1ReturnThis() // boss1\n\n\t\t\t\tlet boss2 = {\n\t\t\t\t\tname: 'boss2'\n\t\t\t\t}\n\t\t\t\tboss1ReturnThis.call(boss2) // boss1\n\t\t\t",code7:"\n\t\t\t\tfunction showThis() {\n\t\t\t\t\treturn this\n\t\t\t\t}\n\t\t\t\tshowThis() // window\n\t\t\t\tnew showThis() // showThis\n\t\t\t\tlet boss1 = {\n\t\t\t\t\tname: 'boss1'\n\t\t\t\t}\n\t\t\t\tshowThis.call(boss1) // boss1\n\t\t\t\tnew showThis().call(boss1) // 报错TypeError\n\t\t\t\tlet boss1ShowThis = showThis.bind(boss1)\n\t\t\t\tboss1ShowThis() // boss1\n\t\t\t\tnew boss1ShowThis() // boss1ShowThis\n\t\t\t",code8:"\n\t\t\t\tfunction callback(cb) {\n\t\t\t\t\tcb()\n\t\t\t\t}\n\t\t\t\tcallback(()=>{ console.log(this) })  // window\n\t\t\t\tlet boss1 = {\n\t\t\t\t\tname: 'boss1',\n\t\t\t\t\tcallback: callback,\n\t\t\t\t\tcallback2(){\n\t\t\t\t\t\t(()=>{\n\t\t\t\t\t\t\tconsole.log(this)\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tboss1.callback(()=>{ console.log(this) }) // window\n\t\t\t\tboss1.callback2(()=>{ console.log(this) }) // boss1\n\n\t\t\t",code9:"\n\t\t\t\tlet returnThis = () => this\n\t\t\t\treturnThis() // window\n\t\t\t\tnew returnThis() //TypeError\n\n\t\t\t\tlet boss1 = {\n\t\t\t\t\tname: 'boss1',\n\t\t\t\t\treturnThis() {\n\t\t\t\t\t\tlet func = () => this\n\t\t\t\t\t\treturn func()\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturnThis.call(boss1) // window\n\n\t\t\t\tlet boss1ReturnThis = returnThis.bind(boss1)\n\t\t\t\t\tboss1ReturnThis() // window\n\t\t\t\t\tboss1.returnThis() // boss1\n\n\t\t\t\tlet boss2 = {\n\t\t\t\t\tname: 'boss2',\n\t\t\t\t\treturnThis: boss1.returnThis\n\t\t\t\t}\n\t\t\t\tboss2.returnThis() // boss2\n\n\t\t\t"}},methods:{func1:function(){!function(){console.log(this)}(),function(){console.log(this)}()},func2:function(){var t={name:"boss",returnThis:function(){return this}};console.log(t.returnThis()===t)},func3:function(){var t={name:"boss1",returnThis:function(){return this}},s=function(){return t.returnThis()},n=function(){var s=t.returnThis;return s()};t.returnThis(),s(),n()},func4:function(){({name:"boss2",returnThis:{name:"boss1",returnThis:function(){console.log(this)}}.returnThis}).returnThis()},func5:function(){function t(){return this}var s={name:"boss1"};t(),t.call(s),t.apply(s)},func6:function(){var t=function(){return this}.bind({name:"boss1"});t();t.call({name:"boss2"})},func7:function(){function t(){return this}t(),new t;var s={name:"boss1"};t.call(s),(new t).call(s);var n=t.bind(s);n(),new n},func8:function(){var t=this;function s(t){t()}s(function(){console.log(t)});var n={name:"boss1",callback:s,callback2:function(){}};n.callback(function(){console.log(t)}),n.callback2(function(){console.log(t)})},func9:function(){var t=this,s=function(){return t};s(),new s;var n={name:"boss1",returnThis:function(){return this}};s.call(n),s.bind(n)(),n.returnThis(),{name:"boss2",returnThis:n.returnThis}.returnThis()}}},e={render:function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",[n("h1",[t._v("JavaScript This 的六道坎")]),t._v(" "),n("h2",[t._v("this说白了就是找大佬，找拥有当前上下文（context）的对象（context object）。")]),t._v(" "),n("h3",{staticClass:"bg-analysis"},[t._v("\n\t\t\t大佬可以分为六层，层数越高权力越大，this只会认最大的。\n\t\t")]),t._v(" "),n("div",{staticClass:"section"},[n("h3",{staticClass:"bg-danger"},[t._v("\n\t\t\t\t第一层：世界尽头\n\t\t\t")]),t._v(" "),n("p",{staticClass:"bg-analysis"},[t._v("\n\t\t\t权力最小的大佬是作为备胎的存在，在普通情况下就是全局，浏览器里就是window；在use strict的情况下就是undefined。\n\t\t\t")]),t._v(" "),n("codemirror",{attrs:{value:t.code1}})],1),t._v(" "),n("div",{staticClass:"section"},[n("h3",{staticClass:"bg-danger"},[t._v("\n\t\t\t\t第二层：点石成金\n\t\t\t")]),t._v(" "),n("p",{staticClass:"bg-success"},[t._v("\n\t\t\t\t第二层大佬说白了就是找这个函数前面的点.。\n\t\t\t")]),t._v(" "),n("p",{staticClass:"bg-analysis"},[t._v("\n\t\t\t如果用到this的那个函数是属于某个 context object 的，那么这个 context object 绑定到this。\n\t\t\t")]),t._v(" "),n("p",[t._v("\n\t\t\t\t比如下面的例子，boss是returnThis的 context object ，或者说returnThis属于boss。\n\t\t\t")]),t._v(" "),n("codemirror",{attrs:{value:t.code2}}),t._v(" "),n("p",[t._v("\n\t\t\t\t再往下看\n\t\t\t")]),t._v(" "),n("codemirror",{attrs:{value:t.code3}}),t._v(" "),n("p",{staticClass:"bg-analysis"},[t._v("\n\t\t  在boss2.returnThis里，使用this的函数是boss1.returnThis，所以this绑定到boss1；\n在boss3.returnThis里，使用this的函数是returnThis，所以this绑定到备胎。")]),t._v(" "),n("h4",{staticClass:"bg-danger"},[t._v("\n\t\t\t\t要想把this绑定到boss2怎么做呢？\n\t\t\t")]),t._v(" "),n("codemirror",{attrs:{value:t.code4}}),t._v(" "),n("p",{staticClass:"bg-analysis"},[t._v("没错，只要让使用this的函数是属于boss2就行。")])],1),t._v(" "),n("div",{staticClass:"section"},[n("h3",{staticClass:"bg-danger"},[t._v("\n\t\t\t\t第三层：指腹为婚\n\t\t\t")]),t._v(" "),n("p",{staticClass:"bg-analysis"},[t._v("第三层大佬是Object.prototype.call和Object.prototype.apply，它们可以通过参数指定this。（注意this是不可以直接赋值的哦，this = 2会报ReferenceError。）")]),t._v(" "),n("codemirror",{attrs:{value:t.code5}})],1),t._v(" "),n("div",{staticClass:"section"},[n("h3",{staticClass:"bg-danger"},[t._v("\n\t\t\t\t第四层：海誓山盟\n\t\t\t")]),t._v(" "),n("p",{staticClass:"bg-analysis"},[t._v("\n\t\t\t\t第四层大佬是Object.prototype.bind，他不但通过一个新函数来提供永久的绑定，还会覆盖第三层大佬的命令。\n\t\t\t")]),t._v(" "),n("codemirror",{attrs:{value:t.code6}})],1),t._v(" "),n("div",{staticClass:"section"},[n("h3",{staticClass:"bg-danger"},[t._v("\n\t\t\t\t第五层：内有乾坤\n\t\t\t")]),t._v(" "),n("p",{staticClass:"bg-analysis"},[t._v("\n\t\t\t\t一个比较容易忽略的会绑定this的地方就是new。当我们new一个函数时，就会自动把this绑定在新对象上，然后再调用这个函数。它会覆盖bind的绑定。\n\t\t\t")]),t._v(" "),n("codemirror",{attrs:{value:t.code7}})],1),t._v(" "),n("div",{staticClass:"section"},[n("h3",{staticClass:"bg-danger"},[t._v("\n\t\t\t\t第六层：军令如山\n\t\t\t")]),t._v(" "),n("p",{staticClass:"bg-analysis"},[t._v("\n\t\t\t\t最后一个法力无边的大佬就是 ES2015 的箭头函数。箭头函数里的this不再妖艳，被永远封印到当前词法作用域之中，称作 Lexical this ，在代码运行前就可以确定。没有其他大佬可以覆盖。\n\t\t\t")]),t._v(" "),n("p",{staticClass:"bg-success"},[t._v("\n\t\t\t\t这样的好处就是方便让回调函数的this使用当前的作用域，不怕引起混淆。\n\t\t\t")]),t._v(" "),n("p",[t._v("\n所以对于箭头函数，只要看它在哪里创建的就行。\n\t")]),t._v(" "),n("p",{staticClass:"bg-analysis"},[t._v("\n如果对 V8 实现的词法作用域感兴趣可以看看这里。\n")]),t._v(" "),n("codemirror",{attrs:{value:t.code8}}),t._v(" "),n("p",{staticClass:"bg-analysis"},[t._v("\n\t      \t下面这种奇葩的使用方式就需要注意：\n\t      ")]),t._v(" "),n("codemirror",{attrs:{value:t.code9}}),t._v(" "),n("p",{staticClass:"bg-analysis"},[t._v(" 如果你不知道最后为什么会是 boss2，继续理解“对于箭头函数，只要看它在哪里创建”这句话。")])],1)])},staticRenderFns:[]};var i=n("VU/8")(o,e,!1,function(t){n("eENm")},null,null);s.default=i.exports},eENm:function(t,s){}});
//# sourceMappingURL=1.1815902de04e39fdb890.js.map